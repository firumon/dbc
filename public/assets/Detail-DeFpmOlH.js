import{Q as y}from"./QInput-DwGHxsu1.js";import{Q as q}from"./QBtn-8kexOv-L.js";import{Q as E}from"./QCardSection-B8zqNFw5.js";import{Q as I,a as k}from"./QItem-B3a1-EVM.js";import{Q as F}from"./QList-BLNtoxNV.js";import{Q as G}from"./QCardActions-BkXs8E73.js";import{Q as H}from"./QCard-zMgqcLyM.js";import{Q as J}from"./QPage-RsarDNA8.js";import{u as O}from"./company-B_tY9lVt.js";import{u as R}from"./layout-CcLOBX2J.js";import{_ as W}from"./InnerLoading-BSoZfbcz.js";import{l as o}from"./lodash-BMWjruN6.js";import{u as X}from"./title-B4t3WEGW.js";import{h as B,c as n,p as T,a as V,o as t,w as l,k as D,e as a,f as K,g as r,r as L,F as m,b as U,u as x}from"./index-DPf0em9p.js";import"./use-router-link-C1KlW-z0.js";import"./vm-B-IvL0So.js";import"./render-BBT-_xwK.js";import"./use-id-eV3rINdq.js";import"./use-dark-DWgxBQGk.js";import"./dom-DYRJl-LZ.js";import"./axios-BJmCVD_q.js";import"./user-CzO-FWtq.js";import"./_commonjsHelpers-_d1bhYXs.js";const Y={class:"flex q-gutter-x-sm"},Z={class:"col-grow"},Pe={__name:"Detail",props:["company_id","individual_id"],setup(M){const p=O(),N=R(),s=M,f=B(!1),g=B(""),v=B({}),_=n(()=>p.CompaniesById?.[s.company_id]),C=n(()=>p.Individual(s.company_id,s.individual_id)),S=n(()=>N.LayoutsById?.[_.value?.layout_id]),c=n(()=>_.value?p.Properties(_.value.id):{}),w=n(()=>_.value&&C.value?p.IndividualProperties(_.value.id,C.value.id):{}),Q=n(()=>S.value?N.LayoutProperties(S.value.id,null):[]),h=n(()=>o.filter(Q.value,["type","vcard"])),A=n(()=>o.filter(Q.value,["type","layout"])),$=n(()=>o.keyBy(Q.value,"name")),b=n(()=>o.mapValues($.value,({name:d,value:u})=>v.value[d]||c.value[d]||u));function P(d,u){v.value[d]=u}T(C,d=>g.value=d?.name||"",{immediate:!0}),T([Q,c,w],function(d){let u=d[0];v.value={},o.map(u,e=>v.value[e.name]=""),o.map(w.value,(e,i)=>v.value[i]=e)},{immediate:!0});function j(){f.value=!0,p.updateIndividualName(s.company_id,s.individual_id,g.value).then(()=>f.value=!1)}function z(){f.value=!0,p.updateIndividualProperties(s.company_id,s.individual_id,v.value).then(()=>f.value=!1)}return X(C),(d,u)=>(t(),V(J,{padding:"",class:"q-gutter-y-sm"},{default:l(()=>[D("div",Y,[D("div",Z,[a(y,{modelValue:g.value,"onUpdate:modelValue":u[0]||(u[0]=e=>g.value=e),label:"Name",outlined:""},null,8,["modelValue"])]),a(q,{icon:"forward",color:"primary",onClick:j})]),a(H,null,{default:l(()=>[a(E,{class:"text-bold bg-grey-2"},{default:l(()=>[...u[1]||(u[1]=[K("Individual Properties",-1)])]),_:1}),a(F,null,{default:l(()=>[(t(!0),r(m,null,L(h.value,e=>(t(),r(m,null,[c.value[e.name]?U("",!0):(t(),V(I,{key:0},{default:l(()=>[a(k,null,{default:l(()=>[a(y,{modelValue:b.value[e.name],"onUpdate:modelValue":i=>P(e.name,i),label:x(o.startCase)(e.name),outlined:""},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024)]),_:2},1024))],64))),256)),(t(!0),r(m,null,L(A.value,e=>(t(),r(m,null,[c.value[e.name]?U("",!0):(t(),V(I,{key:0},{default:l(()=>[a(k,null,{default:l(()=>[a(y,{modelValue:b.value[e.name],"onUpdate:modelValue":i=>P(e.name,i),label:x(o.startCase)(e.name),outlined:""},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024)]),_:2},1024))],64))),256))]),_:1}),a(E,{class:"text-bold bg-grey-2"},{default:l(()=>[...u[2]||(u[2]=[K("Company Properties",-1)])]),_:1}),a(F,null,{default:l(()=>[(t(!0),r(m,null,L(h.value,e=>(t(),r(m,null,[c.value[e.name]?(t(),V(I,{key:0},{default:l(()=>[a(k,null,{default:l(()=>[a(y,{modelValue:b.value[e.name],"onUpdate:modelValue":i=>P(e.name,i),label:x(o.startCase)(e.name),outlined:""},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024)]),_:2},1024)):U("",!0)],64))),256)),(t(!0),r(m,null,L(A.value,e=>(t(),r(m,null,[c.value[e.name]?(t(),V(I,{key:0},{default:l(()=>[a(k,null,{default:l(()=>[a(y,{modelValue:b.value[e.name],"onUpdate:modelValue":i=>P(e.name,i),label:x(o.startCase)(e.name),outlined:""},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024)]),_:2},1024)):U("",!0)],64))),256))]),_:1}),a(G,{align:"right",class:"bg-grey-2"},{default:l(()=>[a(q,{color:"primary",label:"Update Properties",onClick:z})]),_:1})]),_:1}),a(W,{loading:f.value},null,8,["loading"])]),_:1}))}};export{Pe as default};
