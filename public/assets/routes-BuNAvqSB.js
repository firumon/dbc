import{q as N,h as r,c,ai as S}from"./index-D3MJetay.js";import{u as k}from"./user-_mu4dbbL.js";import{l as n}from"./lodash-BMWjruN6.js";const U=N("menu",()=>{const m=r({index:["Dashboard",""],properties_list:["Properties","fact_check"],property_add:["Add New Property","add"],layouts_list:["Layouts","view_column"],layout_add:["Add New Layout","margin"],layout_properties:["Manage Properties","generating_tokens"],layout_users:["Manage Users","supervised_user_circle"],profile:["Profile","manage_accounts"],manage_admins:["Administrators","assignment_ind"],manage_resellers:["Resellers","attribution"],manage_managers:["Managers","assignment_ind"],companies_list:["Companies","foundation"],company_add:["Add New Company","add_business"],individuals:["Individuals","camera_front","Select Company"],company_properties:["Properties","widgets"],company_users:["Managers","groups_3"],reseller_companies:["Companies","business"],manager_companies:["Companies","business"],company_individuals:["Individuals","camera_front"],individual_logins:["Logins","login","Individual Logins"]}),o=r({Developer:{Properties:["properties_list","property_add"],Layout:["layouts_list","layout_add","layout_properties","layout_users"],Administrators:["manage_admins"]},Administrator:{Individual:["individuals","individual_logins"],Company:["companies_list","company_add","company_properties","company_users"],Layout:["layouts_list","layout_users"],Resellers:["manage_resellers","reseller_companies"],Managers:["manage_managers","manager_companies"]},Reseller:{Individual:["individuals","individual_logins"],Company:["companies_list","company_add","company_properties","company_users"],Managers:["manage_managers","manager_companies"]},Manager:{Individual:["individuals","individual_logins"],Company:["companies_list","company_properties"]},Individual:{Individual:["individuals"]}}),A=r({layouts_list:[{route:"layout_properties",roles:["Developer"],params:({id:e})=>({layout_id:e}),label:"Properties",icon:"new_label"},{route:"layout_users",roles:["Developer"],params:({id:e})=>({layout_id:e}),label:"Assign Users",icon:"supervised_user_circle"},{route:"layout_users",roles:["Administrator"],params:({id:e})=>({layout_id:e}),label:"Assign Resellers"}],companies_list:[{route:"company_individuals",roles:["Administrator","Reseller"],params:({id:e})=>({company_id:e})},{route:"company_properties",roles:["Administrator","Reseller"],params:({id:e})=>({company_id:e})},{route:"company_users",roles:["Administrator","Reseller"],params:({id:e})=>({company_id:e})}]}),d=r({company_detail:e=>({id:e.id}),layout_detail:e=>({id:e.id}),company_individual:e=>({company_id:e.company_id,individual_id:e.id}),individual_login_manage:e=>({user_id:e.id})}),t=r({company_individuals:e=>e.name+" Individuals",company_properties:e=>e.name+" Properties",company_users:e=>e.name+" Managers",company_individual:e=>e.name,company_detail:e=>e.name,layout_users:e=>e.name+" Users",layout_detail:e=>e.name,individual_login_manage:e=>e.name});return{label_icon:m,role_routes:o,sub_routes:A,dynamic_params:d,dynamic_titles:t}}),_=r(null),P=r(null),v=r(null),y=r(null),f=r(null),g=r(null),p=r(null),h=r(null),u=r(null),w=r(null),b=r(null),R=r(null);function B(){const m=S(),o=U(),d=k().User?.role,t=c(()=>m.currentRoute.value.name),e=c(()=>u.value[t]);if(_.value||(_.value=o.label_icon),P.value||(P.value=o.role_routes[d]),v.value||(v.value=o.sub_routes),y.value||(y.value=o.dynamic_titles),g.value||(g.value=o.dynamic_params),p.value||(p.value=n.map(m.getRoutes(),function(s){let i=n.clone(s),a=i.name;if(!a)return i;if(_.value.hasOwnProperty(a)){let l=_.value[a],L=l[2]||l[0];i=n.assign({},i,{label:l[0],icon:l[1],title:L})}return y.value.hasOwnProperty(a)&&(i.titleFn=y.value[a]),g.value.hasOwnProperty(a)&&(i.paramFn=g.value[a]),i}),h.value=n.filter(n.map(p.value,"name")),u.value=n.keyBy(p.value,"name")),w.value||(w.value=n.mapValues(P.value,function(s){return n.filter(n.map(s,i=>u.value[i]))})),b.value||(b.value=n.mapValues(v.value,function(s,i){return n.filter(n.map(s,function(a){if(!a.roles.includes(d))return!1;let l=a.route;return!l||!u.value[l]?!1:n.assign({},u.value[l],a)}))})),!R.value){const s=n.mapValues(n.keyBy(n.filter(n.flatMap(v.value),a=>a.hasOwnProperty("params")),"route"),function(a){return a.hasOwnProperty("params")?a.params:!1}),i=n.mapValues(n.keyBy(n.filter(p.value,a=>a.hasOwnProperty("paramFn")),"name"),"paramFn");R.value={...s,...i}}const I=c(()=>b.value[t.value]),C=c(function(){const s=t.value;return u.value[s]&&u.value[s].titleFn&&f.value?u.value[s].titleFn(f.value):u.value[s].title||""});function M(s,i){if(!h.value.includes(s))return{};let a=s,l={};return i?(R.value.hasOwnProperty(a)&&(l=R.value[a](i)),{name:a,params:l}):{name:a}}function O(s,i){return new Promise(a=>m.push(M(s,i)).then(()=>f.value=null).then(a))}function F(s){f.value=s}return{routeNames:h,menus:w,subMenus:b,listMenus:I,pageTitle:C,namedRoutes:u,currentRoute:e,routeName:t,pushRouteObj:M,push:O,setTitleResource:F}}export{B as u};
