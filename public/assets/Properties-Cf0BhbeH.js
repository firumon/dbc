import{Q as F}from"./QSpace-Y9BK-8G3.js";import{Q as x}from"./QBtn-CmpX_coh.js";import{Q as B}from"./QCardSection-Jbcbm-vP.js";import{Q as oe,a as j}from"./QItem-Dgu9JK4v.js";import{Q as q}from"./QItemLabel-Bc19V8a5.js";import{Q as E}from"./use-router-link-CSWtRJzU.js";import{Q as re}from"./QList-DmXAj4qO.js";import{Q as R}from"./QCard-Dz9uU80K.js";import{Q as H}from"./QDialog-DIDeD7D9.js";import{Q as ue}from"./QPage-CMxJKmsA.js";import{_ as ne}from"./ChooseLayoutSelect-ekyirUyC.js";import{Q as z}from"./QSelect-BP46biaE.js";import{Q as K}from"./QChip-D8QrZMEs.js";import{Q as C}from"./QInput-xwkH9gNC.js";import{u as se,a as de,b as me}from"./use-checkbox-iFpzt5Mb.js";import{m as ie,c as g,n as T,h as S,j as W,l as X,p as Y,a as b,o as d,w as u,e,f as P,i as Z,g as c,b as U,k as h,F as $,r as N,t as L}from"./index-CVIMlvYm.js";import{Q as ee}from"./QCardActions-Cei77pT8.js";import{C as le}from"./ClosePopup-C2UBjTUF.js";import{u as ae}from"./property-CoHgzj97.js";import{l as k}from"./lodash-BMWjruN6.js";import{u as J}from"./layout-DXGt4dUJ.js";import{_ as te}from"./InnerLoading-CpwP3uL1.js";import"./vm-C9CMmNuj.js";import"./dom-D7QtCoj4.js";import"./render-6HoAj0_g.js";import"./use-dark-DkcyDAJO.js";import"./use-prevent-scroll-CA8N-g0I.js";import"./scroll-Bz2OQy8r.js";import"./use-timeout-CIWZKlVR.js";import"./use-model-toggle-eX9UmeE1.js";import"./format-CSSDOkxg.js";import"./use-id-CgI_dfuk.js";import"./axios-Din57D94.js";import"./_commonjsHelpers-_d1bhYXs.js";const D=ie({name:"QToggle",props:{...de,icon:String,iconColor:String},emits:se,setup(_){function I(y,o){const n=g(()=>(y.value===!0?_.checkedIcon:o.value===!0?_.indeterminateIcon:_.uncheckedIcon)||_.icon),t=g(()=>y.value===!0?_.iconColor:null);return()=>[T("div",{class:"q-toggle__track"}),T("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},n.value!==void 0?[T(E,{name:n.value,color:t.value})]:void 0)]}return me("toggle",I)}}),pe={key:0},ye={key:1,class:"row q-col-gutter-xs"},ve={class:"col"},ce={class:"flex justify-around"},fe={__name:"AddProperty",props:["layout_id"],setup(_){const I=_,y=S(!1),o=W({property_name:null,name:null,type:null,image:null,mandatory:null,value:null,params:null,description:null}),n=S([]),t=ae(),p=J(),V=g(()=>t.Properties?.map(r=>r.name)),v=g(()=>o.property_name?t.PropertiesByPropertyName[o.property_name]:null);function w(){["property_name","name","value","params","description"].map(r=>o[r]=null),o.type="vcard",["image","mandatory"].map(r=>o[r]=0),n.value.slice(0,n.value.length),y.value=!1}X(w),Y(()=>o.property_name,r=>{if(!r)return n.value.slice(0,n.value.length);const a=v.value,l=a?a.v_card_property_id:null;if(!l)return null;n.value=t.VCardPropertiesById[l].parameters,o.params=k.zipObject(n.value,new Array(n.value.length).fill(null)),o.name=r});function f(){y.value=!0;let r=k.clone(o);r.params={},k.map(o.params,(a,l)=>a?r.params[l]=a:null),p.addLayoutProperty(I.layout_id,r).then(w)}return(r,a)=>(d(),b(R,null,{default:u(()=>[e(B,{class:"text-bold bg-grey-2 flex items-center"},{default:u(()=>[a[7]||(a[7]=P("Add New Layout Property ",-1)),e(F),Z(e(x,{icon:"close",color:"negative",flat:"",dense:""},null,512),[[le]])]),_:1}),e(B,{class:"q-gutter-y-xs"},{default:u(()=>[e(z,{modelValue:o.property_name,"onUpdate:modelValue":a[0]||(a[0]=l=>o.property_name=l),outlined:"",label:"Select Property",clearable:"",options:V.value},null,8,["modelValue","options"]),v.value?(d(),c("div",pe,[(d(!0),c($,null,N(v.value,(l,Q)=>(d(),b(K,{outline:"",size:"sm",square:"",label:Q+": "+(typeof l=="object"?JSON.stringify(l):l)},null,8,["label"]))),256)),e(x,{href:"https://www.rfc-editor.org/rfc/rfc2426",size:"sm",outline:"",label:"rfc2426",dense:"",padding:"none sm",target:"_blank"})])):U("",!0),v.value&&n.value.length?(d(),c("div",ye,[(d(!0),c($,null,N(n.value,l=>(d(),c("div",ve,[e(C,{outlined:"",label:l,modelValue:o.params[l],"onUpdate:modelValue":Q=>o.params[l]=Q},null,8,["label","modelValue","onUpdate:modelValue"])]))),256))])):U("",!0),e(C,{modelValue:o.name,"onUpdate:modelValue":a[1]||(a[1]=l=>o.name=l),outlined:"",label:"Name (no space)"},null,8,["modelValue"]),e(z,{modelValue:o.type,"onUpdate:modelValue":a[2]||(a[2]=l=>o.type=l),options:["layout","vcard"],label:"Type",outlined:""},null,8,["modelValue"]),h("div",ce,[e(D,{modelValue:o.image,"onUpdate:modelValue":a[3]||(a[3]=l=>o.image=l),"false-value":0,"true-value":1,label:"Its a Image URL"},null,8,["modelValue"]),e(D,{modelValue:o.mandatory,"onUpdate:modelValue":a[4]||(a[4]=l=>o.mandatory=l),"false-value":0,"true-value":1,label:"Its a Mandatory Property"},null,8,["modelValue"])]),e(C,{modelValue:o.value,"onUpdate:modelValue":a[5]||(a[5]=l=>o.value=l),label:"Default Value",outlined:""},null,8,["modelValue"]),e(C,{modelValue:o.description,"onUpdate:modelValue":a[6]||(a[6]=l=>o.description=l),label:"Describe Property",outlined:"",type:"textarea"},null,8,["modelValue"])]),_:1}),e(ee,{align:"right",class:"bg-grey-1"},{default:u(()=>[e(x,{label:"Add Property",color:"primary",onClick:f})]),_:1}),e(te,{loading:y.value},null,8,["loading"])]),_:1}))}},ge={key:0},_e={key:1,class:"row q-col-gutter-xs"},Ve={class:"col"},be={class:"flex justify-around"},Pe={__name:"EditProperty",props:["layout_id","name"],emits:["close"],setup(_,{emit:I}){const y=_,o=I,n=S(!1),t=W({property_name:null,name:null,type:null,image:null,mandatory:null,value:null,params:null,description:null}),p=S([]),V=ae(),v=J(),w=g(()=>V.Properties?.map(i=>i.name)),f=g(()=>v.LayoutProperties(y.layout_id,y.name)),r=g(()=>V.PropertiesByPropertyName[t.property_name||f.value?.property_name]),a=g(()=>r.value?V.vCardParamsOfPropertyName(r.value.property_name):[]);function l(){f.value?(["property_name","name","value","description","type"].map(i=>t[i]=f.value[i]),["image","mandatory"].map(i=>t[i]=f.value[i]?1:0),p.value=a.value,t.params=k.zipObject(p.value,new Array(p.value.length).fill(null)),Q(t.property_name)):(["property_name","name","value","params","description"].map(i=>t[i]=null),t.type="vcard",["image","mandatory"].map(i=>t[i]=0),p.value.slice(0,p.value.length)),n.value=!1}X(()=>setTimeout(l,1200));function Q(i){if(!i)return p.value.slice(0,p.value.length);p.value=V.vCardParamsOfPropertyName(i),t.params=k.zipObject(p.value,new Array(p.value.length).fill(null)),f.value.property_name===i&&k.map(f.value.params,(m,s)=>t.params[s]=m)}Y(()=>t.property_name,Q);function A(){n.value=!0;let i=k.clone(t);i.params={},k.map(t.params,(m,s)=>m?i.params[s]=m:null),v.updateLayoutProperty(y.layout_id,f.value.id,i).then(l).then(G)}function M(){n.value=!0,v.deleteLayoutProperty(y.layout_id,f.value.id).then(l).then(G)}function G(){o("close")}return(i,m)=>(d(),b(R,null,{default:u(()=>[e(B,{class:"text-bold bg-grey-2 flex items-center"},{default:u(()=>[m[7]||(m[7]=P("Edit Property ",-1)),e(F),Z(e(x,{icon:"close",color:"negative",flat:"",dense:""},null,512),[[le]])]),_:1}),e(B,{class:"q-gutter-y-xs"},{default:u(()=>[e(z,{modelValue:t.property_name,"onUpdate:modelValue":m[0]||(m[0]=s=>t.property_name=s),outlined:"",label:"Select Property",clearable:"",options:w.value},null,8,["modelValue","options"]),r.value?(d(),c("div",ge,[(d(!0),c($,null,N(r.value,(s,O)=>(d(),b(K,{outline:"",size:"sm",square:"",label:O+": "+s},null,8,["label"]))),256)),e(x,{href:"https://www.rfc-editor.org/rfc/rfc2426",size:"sm",outline:"",label:"rfc2426",dense:"",padding:"none sm",target:"_blank"})])):U("",!0),r.value&&p.value.length?(d(),c("div",_e,[(d(!0),c($,null,N(p.value,s=>(d(),c("div",Ve,[e(C,{outlined:"",label:s,modelValue:t.params[s],"onUpdate:modelValue":O=>t.params[s]=O},null,8,["label","modelValue","onUpdate:modelValue"])]))),256))])):U("",!0),e(C,{modelValue:t.name,"onUpdate:modelValue":m[1]||(m[1]=s=>t.name=s),outlined:"",label:"Name (no space)"},null,8,["modelValue"]),e(z,{modelValue:t.type,"onUpdate:modelValue":m[2]||(m[2]=s=>t.type=s),options:["layout","vcard"],label:"Type",outlined:""},null,8,["modelValue"]),h("div",be,[e(D,{modelValue:t.image,"onUpdate:modelValue":m[3]||(m[3]=s=>t.image=s),"false-value":0,"true-value":1,label:"Its a Image URL"},null,8,["modelValue"]),e(D,{modelValue:t.mandatory,"onUpdate:modelValue":m[4]||(m[4]=s=>t.mandatory=s),"false-value":0,"true-value":1,label:"Its a Mandatory Property"},null,8,["modelValue"])]),e(C,{modelValue:t.value,"onUpdate:modelValue":m[5]||(m[5]=s=>t.value=s),label:"Default Value",outlined:""},null,8,["modelValue"]),e(C,{modelValue:t.description,"onUpdate:modelValue":m[6]||(m[6]=s=>t.description=s),label:"Describe Property",outlined:"",type:"textarea"},null,8,["modelValue"])]),_:1}),e(ee,{align:"between",class:"bg-grey-1"},{default:u(()=>[e(x,{color:"primary",onClick:M,icon:"delete",flat:""}),e(x,{label:"Update Property",color:"primary",onClick:A})]),_:1}),e(te,{loading:n.value},null,8,["loading"])]),_:1}))}},Qe={key:0},tl={__name:"Properties",props:["layout_id"],setup(_){const I=J(),y=_,o=S(y.layout_id),n=g(()=>o.value||y.layout_id),t=g(()=>n.value?I.LayoutsById[n.value]:null),p=g(()=>t.value?t.value.properties:[]),V=S(!1),v=S(null),w=g({get:()=>v.value!==null,set:r=>v.value=r||null});function f({name:r}){v.value=r}return(r,a)=>(d(),b(ue,{padding:"",class:"q-gutter-y-xs"},{default:u(()=>[y.layout_id?U("",!0):(d(),b(ne,{key:0,modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=l=>o.value=l)},null,8,["modelValue"])),e(R,null,{default:u(()=>[e(B,{class:"bg-grey-2 text-bold flex items-center"},{default:u(()=>[a[5]||(a[5]=P("Layout Properties",-1)),e(F),n.value?(d(),b(x,{key:0,icon:"add",round:"",dense:"",color:"green",onClick:a[1]||(a[1]=l=>V.value=!0)})):U("",!0)]),_:1}),e(re,{separator:""},{default:u(()=>[(d(!0),c($,null,N(p.value,(l,Q)=>(d(),b(oe,{clickable:"",onClick:A=>f(l)},{default:u(()=>[e(j,{side:""},{default:u(()=>[P(L(Q+1),1)]),_:2},1024),e(j,null,{default:u(()=>[e(q,null,{default:u(()=>[P(L(l.name),1)]),_:2},1024),e(q,{caption:""},{default:u(()=>[P(L(l.type),1),l.type==="vcard"?(d(),c("span",Qe," - "+L(l.property_name),1)):U("",!0)]),_:2},1024)]),_:2},1024),l.params?(d(),b(j,{key:0},{default:u(()=>[(d(!0),c($,null,N(l.params,(A,M)=>(d(),b(q,{caption:""},{default:u(()=>[P(L(M)+": "+L(A),1)]),_:2},1024))),256))]),_:2},1024)):U("",!0),e(j,{side:""},{default:u(()=>[e(q,{caption:""},{default:u(()=>[a[6]||(a[6]=P("Image: ",-1)),e(E,{name:l.image?"check":"close"},null,8,["name"])]),_:2},1024),e(q,{caption:""},{default:u(()=>[a[7]||(a[7]=P("Mandatory: ",-1)),e(E,{name:l.mandatory?"check":"close"},null,8,["name"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),256))]),_:1})]),_:1}),e(H,{modelValue:V.value,"onUpdate:modelValue":a[2]||(a[2]=l=>V.value=l),persistent:""},{default:u(()=>[e(fe,{layout_id:n.value},null,8,["layout_id"])]),_:1},8,["modelValue"]),e(H,{modelValue:w.value,"onUpdate:modelValue":a[4]||(a[4]=l=>w.value=l),persistent:""},{default:u(()=>[e(Pe,{layout_id:n.value,name:v.value,onClose:a[3]||(a[3]=l=>v.value=null)},null,8,["layout_id","name"])]),_:1},8,["modelValue"])]),_:1}))}};export{tl as default};
