import{Q as T}from"./QSpace-Y9BK-8G3.js";import{Q as D}from"./QInput-xwkH9gNC.js";import{Q as E}from"./QCardSection-Jbcbm-vP.js";import{Q as R}from"./QCheckbox-Bz9seUNV.js";import{Q as $,a as C}from"./QItem-Dgu9JK4v.js";import{Q as S}from"./QItemLabel-Bc19V8a5.js";import{Q as j}from"./QList-DmXAj4qO.js";import{Q as q}from"./QBtn-CmpX_coh.js";import{Q as P}from"./QCardActions-Cei77pT8.js";import{Q as h}from"./QCard-Dz9uU80K.js";import{Q as z}from"./QPage-CMxJKmsA.js";import{_ as G}from"./ChooseLayoutSelect-ekyirUyC.js";import{u as H}from"./layout-DXGt4dUJ.js";import{u as J}from"./user-BN_EHo7G.js";import{_ as K}from"./InnerLoading-CpwP3uL1.js";import{l as n}from"./lodash-BMWjruN6.js";import{u as M}from"./title-DVMFqw8Q.js";import{c as o,h as d,p as O,a as y,o as p,w as t,b as W,e,f as _,g as X,r as Y,F as Z,t as g}from"./index-CVIMlvYm.js";import"./use-router-link-CSWtRJzU.js";import"./vm-C9CMmNuj.js";import"./render-6HoAj0_g.js";import"./use-id-CgI_dfuk.js";import"./use-dark-DkcyDAJO.js";import"./use-checkbox-iFpzt5Mb.js";import"./dom-D7QtCoj4.js";import"./QSelect-BP46biaE.js";import"./QChip-D8QrZMEs.js";import"./format-CSSDOkxg.js";import"./use-model-toggle-eX9UmeE1.js";import"./QDialog-DIDeD7D9.js";import"./use-prevent-scroll-CA8N-g0I.js";import"./scroll-Bz2OQy8r.js";import"./use-timeout-CIWZKlVR.js";import"./axios-Din57D94.js";import"./_commonjsHelpers-_d1bhYXs.js";const De={__name:"Users",props:["layout_id"],setup(k){const U=H(),L=J(),f=k,A={Developer:"Administrator",Administrator:"Reseller"},V=o(()=>L.User),s=o(()=>A[V.value.role]),v=d(f.layout_id),c=d(!1),u=d(""),i=d(null),m=o(()=>v.value||f.layout_id),Q=o(()=>m.value?U.LayoutsById[m.value]:null),b=o(()=>s.value==="Administrator"?Q.value?.admins||[]:Q.value?.users),I=o(()=>s.value==="Administrator"?b.value:n.get(n.find(b.value,["user_id",V.value.id]),"resellers",[])),x=o(()=>n.filter(L.Users,({role:a})=>s.value===a)),w=o(()=>u.value?n.filter(x.value,a=>[a.id,a.name,a.email].join(" ").toLowerCase().includes(u.value.toLowerCase())):x.value);O(I,a=>i.value=a,{immediate:!0});function B(){c.value=!0,U.updateUsers(m.value,i.value,s.value).then(()=>c.value=!1)}return M(Q),(a,l)=>(p(),y(z,{padding:"",class:"q-gutter-y-xs"},{default:t(()=>[f.layout_id?W("",!0):(p(),y(G,{key:0,label:"Select Layout",modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=r=>v.value=r)},null,8,["modelValue"])),e(h,null,{default:t(()=>[e(E,{class:"text-bold bg-grey-2 flex items-center"},{default:t(()=>[l[3]||(l[3]=_(" Layout Users ",-1)),e(T),e(D,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=r=>u.value=r),dense:"",outlined:"",label:"Filter"},null,8,["modelValue"])]),_:1}),e(j,null,{default:t(()=>[(p(!0),X(Z,null,Y(w.value,(r,F)=>(p(),y($,null,{default:t(()=>[e(C,{side:""},{default:t(()=>[e(R,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=N=>i.value=N),val:r.id},null,8,["modelValue","val"])]),_:2},1024),e(C,null,{default:t(()=>[e(S,null,{default:t(()=>[_(g(F+1)+". "+g(r.name),1)]),_:2},1024),e(S,{caption:""},{default:t(()=>[_(g(r.email),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(P,{align:"right",class:"bg-grey-1"},{default:t(()=>[e(q,{label:"Update Users",color:"primary",padding:"sm lg",onClick:B,disable:!m.value},null,8,["disable"])]),_:1})]),_:1}),e(K,{loading:c.value},null,8,["loading"])]),_:1}))}};export{De as default};
