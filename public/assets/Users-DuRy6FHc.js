import{Q as T}from"./QSpace-CYv9toBz.js";import{Q as D}from"./QInput-DwGHxsu1.js";import{Q as E}from"./QCardSection-B8zqNFw5.js";import{Q as R}from"./QCheckbox-DRk718Mj.js";import{Q as $,a as C}from"./QItem-B3a1-EVM.js";import{Q as S}from"./QItemLabel-y0CeKWRr.js";import{Q as j}from"./QList-BLNtoxNV.js";import{Q as q}from"./QBtn-8kexOv-L.js";import{Q as P}from"./QCardActions-BkXs8E73.js";import{Q as h}from"./QCard-zMgqcLyM.js";import{Q as z}from"./QPage-RsarDNA8.js";import{_ as G}from"./ChooseLayoutSelect-CldyNsQ2.js";import{u as H}from"./layout-CcLOBX2J.js";import{u as J}from"./user-CzO-FWtq.js";import{_ as K}from"./InnerLoading-BSoZfbcz.js";import{l as n}from"./lodash-BMWjruN6.js";import{u as M}from"./title-B4t3WEGW.js";import{c as o,h as d,p as O,a as y,o as p,w as t,b as W,e,f as _,g as X,r as Y,F as Z,t as g}from"./index-DPf0em9p.js";import"./use-router-link-C1KlW-z0.js";import"./vm-B-IvL0So.js";import"./render-BBT-_xwK.js";import"./use-id-eV3rINdq.js";import"./use-dark-DWgxBQGk.js";import"./use-checkbox-KnnUCe7V.js";import"./dom-DYRJl-LZ.js";import"./QSelect-B6DyI-vr.js";import"./QChip-Bshvjc4N.js";import"./format-D5dN_LUK.js";import"./use-model-toggle-DXD9td5r.js";import"./QDialog-CnP1ldga.js";import"./use-prevent-scroll-8O9FDE32.js";import"./scroll-UIkbkDpm.js";import"./use-timeout-BsMn8phE.js";import"./axios-BJmCVD_q.js";import"./_commonjsHelpers-_d1bhYXs.js";const De={__name:"Users",props:["layout_id"],setup(k){const U=H(),L=J(),f=k,A={Developer:"Administrator",Administrator:"Reseller"},V=o(()=>L.User),s=o(()=>A[V.value.role]),v=d(f.layout_id),c=d(!1),u=d(""),i=d(null),m=o(()=>v.value||f.layout_id),Q=o(()=>m.value?U.LayoutsById[m.value]:null),b=o(()=>s.value==="Administrator"?Q.value?.admins||[]:Q.value?.users),I=o(()=>s.value==="Administrator"?b.value:n.get(n.find(b.value,["user_id",V.value.id]),"resellers",[])),x=o(()=>n.filter(L.Users,({role:a})=>s.value===a)),w=o(()=>u.value?n.filter(x.value,a=>[a.id,a.name,a.email].join(" ").toLowerCase().includes(u.value.toLowerCase())):x.value);O(I,a=>i.value=a,{immediate:!0});function B(){c.value=!0,U.updateUsers(m.value,i.value,s.value).then(()=>c.value=!1)}return M(Q),(a,l)=>(p(),y(z,{padding:"",class:"q-gutter-y-xs"},{default:t(()=>[f.layout_id?W("",!0):(p(),y(G,{key:0,label:"Select Layout",modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=r=>v.value=r)},null,8,["modelValue"])),e(h,null,{default:t(()=>[e(E,{class:"text-bold bg-grey-2 flex items-center"},{default:t(()=>[l[3]||(l[3]=_(" Layout Users ",-1)),e(T),e(D,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=r=>u.value=r),dense:"",outlined:"",label:"Filter"},null,8,["modelValue"])]),_:1}),e(j,null,{default:t(()=>[(p(!0),X(Z,null,Y(w.value,(r,F)=>(p(),y($,null,{default:t(()=>[e(C,{side:""},{default:t(()=>[e(R,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=N=>i.value=N),val:r.id},null,8,["modelValue","val"])]),_:2},1024),e(C,null,{default:t(()=>[e(S,null,{default:t(()=>[_(g(F+1)+". "+g(r.name),1)]),_:2},1024),e(S,{caption:""},{default:t(()=>[_(g(r.email),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(P,{align:"right",class:"bg-grey-1"},{default:t(()=>[e(q,{label:"Update Users",color:"primary",padding:"sm lg",onClick:B,disable:!m.value},null,8,["disable"])]),_:1})]),_:1}),e(K,{loading:c.value},null,8,["loading"])]),_:1}))}};export{De as default};
