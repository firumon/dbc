import{q as j,h as k,c as u}from"./index-DPf0em9p.js";import{api as i}from"./axios-BJmCVD_q.js";import{l as p}from"./lodash-BMWjruN6.js";import{u as l}from"./user-CzO-FWtq.js";const V=j("company",()=>{const t=k(null),d=u(()=>t.value||y()||[]),s=u(()=>p.keyBy(d.value,"id")),h=u(()=>p.map(d.value,e=>({label:e.name,value:e.id})));function y(){i("company").then(e=>t.value=e)}function f(e){return new Promise(n=>i("company/save",e).then(a=>t.value=a).then(n))}function P(e,n){return new Promise(a=>i("company/update",{id:e,...n}).then(r=>t.value=r).then(a))}const m=u(()=>e=>s.value?.[e]?.individuals||[]);function w(e,n){return new Promise(a=>i("company/individual",{company_id:e,individual_name:n}).then(r=>t.value=r).then(a))}const _=u(()=>e=>v(s.value?.[e]?.properties||[],"property_name","value"));function I(e,n){return new Promise(a=>i("company/properties",{company_id:e,...n}).then(r=>t.value=r).then(a))}const c=u(()=>(e,n)=>p.find(m.value(e),["id",parseInt(n)])),C=u(()=>(e,n)=>v(c.value(e,n)?.properties||[],"property_name","value"));function U(e,n,a){return new Promise(r=>i("company/individual_name",{company_id:e,individual_id:n,name:a}).then(o=>t.value=o).then(r))}function A(e,n,a){return new Promise(r=>i("company/individual_properties",{company_id:e,individual_id:n,...a}).then(o=>t.value=o).then(r))}const S=u(()=>e=>s.value?.[e]?.users||[]);function b(e,n){return new Promise(a=>i("company/user",{company_id:e,user:n}).then(r=>l().fetchUsers()||r).then(r=>t.value=r).then(a))}function x(e,n,a){return new Promise(r=>i("company/individual_user",{company_id:e,individual_id:n,user:a}).then(o=>l().fetchUsers()||o).then(o=>t.value=o).then(r))}function B(e,n){return new Promise(a=>i("company/users_sync",{company_id:e,user_ids:n}).then(r=>t.value=r).then(a))}function N(e,n,a){return new Promise(r=>i("company/individual_user_add",{company_id:e,user_id:a,individual_id:n}).then(o=>t.value=o).then(r))}function O(e,n,a){return new Promise(r=>i("company/individual_user_remove",{company_id:e,user_id:a,individual_id:n}).then(o=>t.value=o).then(r))}return{Companies:d,CompaniesById:s,addNewCompany:f,updateCompany:P,Individuals:m,addIndividual:w,CompanySelectOptions:h,Properties:_,syncCompanyProperties:I,Individual:c,updateIndividualName:U,IndividualProperties:C,updateIndividualProperties:A,Users:S,createAndAddUser:b,createAndAddIndividualUser:x,syncCompanyUsers:B,addIndividualUser:N,removeIndividualUser:O}});function v(t,d,s){return p.mapValues(p.mapKeys(t,d),s)}export{V as u};
