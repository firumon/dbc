import{Q as B}from"./QImg-BPho3-GX.js";import{d as E,Q as P}from"./QInput-xwkH9gNC.js";import{Q as q}from"./QCardSection-Jbcbm-vP.js";import{Q as F}from"./QBtn-CmpX_coh.js";import{Q as k}from"./QCardActions-Cei77pT8.js";import{Q as A}from"./QCard-Dz9uU80K.js";import{m as N,h as f,M as R,N as L,l as U,x as j,n as D,I as _,A as M,a8 as O,a9 as G,a as T,o as $,w as c,e as i,k as w,i as K,aa as z}from"./index-CVIMlvYm.js";import{h as H}from"./render-6HoAj0_g.js";import{v as J}from"./vm-C9CMmNuj.js";import{Q as W}from"./QPage-CMxJKmsA.js";import"./use-timeout-CIWZKlVR.js";import"./use-router-link-CSWtRJzU.js";import"./use-id-CgI_dfuk.js";import"./use-dark-DkcyDAJO.js";import"./dom-D7QtCoj4.js";const X=N({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(s,{slots:m,emit:d}){const p=j(),u=f(null);let o=0;const a=[];function x(e){const l=typeof e=="boolean"?e:s.noErrorFocus!==!0,g=++o,S=(t,n)=>{d(`validation${t===!0?"Success":"Error"}`,n)},V=t=>{const n=t.validate();return typeof n.then=="function"?n.then(r=>({valid:r,comp:t}),r=>({valid:!1,comp:t,err:r})):Promise.resolve({valid:n,comp:t})};return(s.greedy===!0?Promise.all(a.map(V)).then(t=>t.filter(n=>n.valid!==!0)):a.reduce((t,n)=>t.then(()=>V(n).then(r=>{if(r.valid===!1)return Promise.reject(r)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return g===o&&S(!0),!0;if(g===o){const{comp:n,err:r}=t[0];if(r!==void 0&&console.error(r),S(!1,n),l===!0){const C=t.find(({comp:I})=>typeof I.focus=="function"&&J(I.$)===!1);C!==void 0&&C.comp.focus()}}return!1})}function y(){o++,a.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function b(e){e!==void 0&&_(e);const l=o+1;x().then(g=>{l===o&&g===!0&&(s.onSubmit!==void 0?d("submit",e):e?.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function h(e){e!==void 0&&_(e),d("reset"),M(()=>{y(),s.autofocus===!0&&s.noResetFocus!==!0&&v()})}function v(){E(()=>{if(u.value===null)return;(u.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||u.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||u.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(u.value.querySelectorAll("[tabindex]"),l=>l.tabIndex!==-1))?.focus({preventScroll:!0})})}O(G,{bindComponent(e){a.push(e)},unbindComponent(e){const l=a.indexOf(e);l!==-1&&a.splice(l,1)}});let Q=!1;return R(()=>{Q=!0}),L(()=>{Q===!0&&s.autofocus===!0&&v()}),U(()=>{s.autofocus===!0&&v()}),Object.assign(p.proxy,{validate:x,resetValidation:y,submit:b,reset:h,focus:v,getValidationComponents:()=>a}),()=>D("form",{class:"q-form",ref:u,onSubmit:b,onReset:h},H(m.default))}}),pe={__name:"Index",setup(s){const m=f(""),d=f(""),p=f(document.getElementsByName("csrf-token")[0].content);return f(LOGIN_URL),(u,o)=>($(),T(W,{class:"flex flex-center"},{default:c(()=>[i(X,{action:"http://xnt/login",method:"post",style:{width:"90%","max-width":"520px"}},{default:c(()=>[i(A,null,{default:c(()=>[i(B,{src:"https://colorlib.com/etc/lf/Login_v15/images/bg-01.jpg",class:"q-py-lg"},{default:c(()=>[...o[3]||(o[3]=[w("div",{class:"absolute-full text-h4 flex flex-center text-bold"},"SIGN IN",-1)])]),_:1}),i(q,{class:"q-gutter-y-sm"},{default:c(()=>[i(P,{outlined:"",label:"Login Email",modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=a=>m.value=a),type:"email",name:"email"},null,8,["modelValue"]),i(P,{outlined:"",label:"Password",modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=a=>d.value=a),type:"password",name:"password"},null,8,["modelValue"]),K(w("input",{type:"hidden",name:"_token","onUpdate:modelValue":o[2]||(o[2]=a=>p.value=a)},null,512),[[z,p.value]])]),_:1}),i(k,{class:"bg-grey-2 q-py-md",align:"right"},{default:c(()=>[i(F,{label:"Proceed",color:"primary",padding:"sm md",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{pe as default};
