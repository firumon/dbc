import{Q as w}from"./QImg-BxD7io_U.js";import{d as E,Q as P}from"./QInput-C9VUkdKg.js";import{Q as q}from"./QCardSection-CiG6isgs.js";import{Q as F}from"./QBtn-BmTDBXaF.js";import{Q as k}from"./QCardActions-C0hx0afw.js";import{Q as A}from"./QCard-r55_QlSX.js";import{m as N,h as m,M as R,N as L,l as M,x as U,n as D,I as B,A as O,a8 as j,a9 as G,a as T,o as $,w as f,e as u,k as _,i as K,aa as W}from"./index-D3MJetay.js";import{h as z}from"./render-DOsC2Df9.js";import{v as H}from"./vm-D0m787GO.js";import{Q as J}from"./QPage-CvTATe-M.js";import"./use-timeout-BZCs8B8e.js";import"./use-router-link-Dr-Zi9tW.js";import"./use-id-3XFJ6Wvj.js";import"./use-dark-zETD_P0k.js";import"./dom-t3s1oZ0g.js";const X=N({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(r,{slots:p,emit:c}){const v=U(),s=m(null);let d=0;const o=[];function i(e){const l=typeof e=="boolean"?e:r.noErrorFocus!==!0,g=++d,S=(t,a)=>{c(`validation${t===!0?"Success":"Error"}`,a)},V=t=>{const a=t.validate();return typeof a.then=="function"?a.then(n=>({valid:n,comp:t}),n=>({valid:!1,comp:t,err:n})):Promise.resolve({valid:a,comp:t})};return(r.greedy===!0?Promise.all(o.map(V)).then(t=>t.filter(a=>a.valid!==!0)):o.reduce((t,a)=>t.then(()=>V(a).then(n=>{if(n.valid===!1)return Promise.reject(n)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return g===d&&S(!0),!0;if(g===d){const{comp:a,err:n}=t[0];if(n!==void 0&&console.error(n),S(!1,a),l===!0){const C=t.find(({comp:I})=>typeof I.focus=="function"&&H(I.$)===!1);C!==void 0&&C.comp.focus()}}return!1})}function y(){d++,o.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function b(e){e!==void 0&&B(e);const l=d+1;i().then(g=>{l===d&&g===!0&&(r.onSubmit!==void 0?c("submit",e):e?.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function h(e){e!==void 0&&B(e),c("reset"),O(()=>{y(),r.autofocus===!0&&r.noResetFocus!==!0&&x()})}function x(){E(()=>{if(s.value===null)return;(s.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||s.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||s.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(s.value.querySelectorAll("[tabindex]"),l=>l.tabIndex!==-1))?.focus({preventScroll:!0})})}j(G,{bindComponent(e){o.push(e)},unbindComponent(e){const l=o.indexOf(e);l!==-1&&o.splice(l,1)}});let Q=!1;return R(()=>{Q=!0}),L(()=>{Q===!0&&r.autofocus===!0&&x()}),M(()=>{r.autofocus===!0&&x()}),Object.assign(v.proxy,{validate:i,resetValidation:y,submit:b,reset:h,focus:x,getValidationComponents:()=>o}),()=>D("form",{class:"q-form",ref:s,onSubmit:b,onReset:h},z(p.default))}}),pe={__name:"Index",setup(r){const p=m(""),c=m(""),v=m(document.getElementsByName("csrf-token")[0].content),s=m(LOGIN_URL);return(d,o)=>($(),T(J,{class:"flex flex-center"},{default:f(()=>[u(X,{action:s.value,method:"post",style:{width:"90%","max-width":"520px"}},{default:f(()=>[u(A,null,{default:f(()=>[u(w,{src:"https://i.postimg.cc/8C9P2WMx/Login-Banner.png",class:"q-py-lg"},{default:f(()=>[...o[3]||(o[3]=[_("div",{class:"absolute-full text-h4 flex flex-center text-bold"},"SIGN IN",-1)])]),_:1}),u(q,{class:"q-gutter-y-sm"},{default:f(()=>[u(P,{outlined:"",label:"Login Email",modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=i=>p.value=i),type:"email",name:"email"},null,8,["modelValue"]),u(P,{outlined:"",label:"Password",modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=i=>c.value=i),type:"password",name:"password"},null,8,["modelValue"]),K(_("input",{type:"hidden",name:"_token","onUpdate:modelValue":o[2]||(o[2]=i=>v.value=i)},null,512),[[W,v.value]])]),_:1}),u(k,{class:"bg-grey-2 q-py-md",align:"right"},{default:f(()=>[u(F,{label:"Proceed",color:"primary",padding:"sm md",type:"submit"})]),_:1})]),_:1})]),_:1},8,["action"])]),_:1}))}};export{pe as default};
