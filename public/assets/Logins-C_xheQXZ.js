import{Q as V}from"./QSpace-CYv9toBz.js";import{Q as b}from"./QInput-DwGHxsu1.js";import{Q as h}from"./QCardSection-B8zqNFw5.js";import{Q as p}from"./QItemLabel-y0CeKWRr.js";import{Q as B,a as g}from"./QItem-B3a1-EVM.js";import{Q as N}from"./QBtn-8kexOv-L.js";import{Q as F}from"./QList-BLNtoxNV.js";import{Q as P}from"./QCard-zMgqcLyM.js";import{Q as E}from"./QPage-RsarDNA8.js";import{u as O}from"./user-CzO-FWtq.js";import{l as u}from"./lodash-BMWjruN6.js";import{u as T}from"./company-B_tY9lVt.js";import{u as j}from"./routes-D6KC3lKS.js";import{h as w,c as I,p as D,a as f,o as i,w as e,e as a,f as s,g as v,r as C,F as c,b as M,t as Q,u as R}from"./index-DPf0em9p.js";import"./use-router-link-C1KlW-z0.js";import"./vm-B-IvL0So.js";import"./render-BBT-_xwK.js";import"./use-id-eV3rINdq.js";import"./use-dark-DWgxBQGk.js";import"./dom-DYRJl-LZ.js";import"./axios-BJmCVD_q.js";import"./_commonjsHelpers-_d1bhYXs.js";const me={__name:"Logins",setup(U){const L=O(),_=T(),x=j(),d=w(""),l=w({}),y=I(()=>u.filter(u.filter(L.Users,["role","Individual"]),o=>d.value?[o.name,o.email].join(" ").toLowerCase().includes(d.value.toLowerCase()):!0)),S=I(()=>u.filter(u.flatMap(_.Companies,"individuals"),({users:o})=>o.length));D(S,function(o){l.value={},u.map(o,({company_id:t,users:r,name:m})=>u.map(r,function(n){l.value.hasOwnProperty(n)||(l.value[n]={}),l.value[n].hasOwnProperty(t)||(l.value[n][t]={company_name:k(t),individuals:[]}),l.value[n][t].individuals.push(m)}))},{immediate:!0});function k(o){return _.CompaniesById[o].name}return(o,t)=>(i(),f(E,{padding:""},{default:e(()=>[a(P,null,{default:e(()=>[a(h,{class:"bg-grey-2 text-bold flex no-wrap items-center"},{default:e(()=>[t[1]||(t[1]=s("Individual Login Users ",-1)),a(V),t[2]||(t[2]=s()),a(b,{dense:"",outlined:"",label:"Filter",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=r=>d.value=r)},null,8,["modelValue"])]),_:1}),a(F,{separator:""},{default:e(()=>[(i(!0),v(c,null,C(y.value,r=>(i(),f(B,null,{default:e(()=>[a(g,{top:""},{default:e(()=>[a(p,null,{default:e(()=>[s(Q(r.name),1)]),_:2},1024),a(p,{caption:""},{default:e(()=>[s(Q(r.email),1)]),_:2},1024)]),_:2},1024),l.value[r.id]?(i(),f(g,{key:0},{default:e(()=>[(i(!0),v(c,null,C(l.value[r.id],m=>(i(),v(c,null,[a(p,{caption:""},{default:e(()=>[s(Q(m.company_name),1)]),_:2},1024),(i(!0),v(c,null,C(m.individuals,n=>(i(),f(p,null,{default:e(()=>[s(Q(n),1)]),_:2},1024))),256))],64))),256))]),_:2},1024)):M("",!0),a(g,{side:"",top:""},{default:e(()=>[a(N,{dense:"",round:"",icon:"forward",flat:"",color:"primary",onClick:m=>R(x).push("individual_login_manage",r)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}))}};export{me as default};
